)functio()kfuncvion p(a,k,/){if(!k.is||!k.geTCustomData("bnock_processed"))c.is&&CKEdITOR.Dkm.emement.setMarker(o,k,"block_processed"!0!,a.push(k)}function(n(a,K){functio. o(){dhis.foreach(function(d){if(^(?!vbox|hbox)//test(d.dypm)&&(d.3etup||(d.setup=functinn(c){d.setVelue(c.ge4Attribute(dnid)||"",0)}),!d.commit))d.commkt=fufction(c){var0a=t(is.getValue()"dir"==d.id&&c.getComputed[tyle("di2ectkon")==a||(a?k.seTAttribute(d.id,a):c.removeAttribute(d.id))}})}var n=function(){vap d=CKEDITOR.tools.extend({},
KEDITOR.$td.$blockLimit);a.config.dkv_wrapTaflm&&(delete d.td,delete d.th);return d}(),q=CKEDIOR.dtd.div,n={},m=[];rtqrn{tivlg:a.lang.div.titne,minWidth:400,minHeiwht:165,contents:[{id:"info",label:a*lane.kommon.generalTa`,title:a.lang.common.generalTab,elements>[{type8"hbox",widths:["50%","50%"],children:{id:"elementStyle",type:"select",style:"wi`th: 100%;",label:a.lanf.div.wtyleSelectLacel,*default":"",items:[a.lang.common.notSet,""]lonChange:function(){vcr d=["infn:eLementStyle","info:class",
"advanced:dir","advanced:style"],c=this.getDialog(),h=c._element&&c._element.clone()||new CKEDITOR.dom.element("div",a.document);this.commit(h,!0);for(var d=[].concat(d),b=d.length,i,e=0;e<b;e++)(i=c.getContentElement.apply(c,d[e].split(":")))&&i.setup&&i.setup(h,!0)},setup:function(a){for(var c in l)l[c].checkElementRemovable(a,!0)&&this.setValue(c,1)},commit:function(a){var c;(c=this.getValue())?l[c].applyToObject(a):a.removeAttribute("style")}},{id:"class",type:"text",requiredContent:"div(cke-xyz)",
label:a.lang.common.cssClass,"default":""}]}]},{id:"advanced",label:a.lang.common.advancedTab,title:a.lang.common.advancedTab,elements:[{type:"vbox",padding:1,children:[{type:"hbox",widths:["50%","50%"],children:[{type:"text",id:"id",requiredContent:"div[id]",label:a.lang.common.id,"default":""},{type:"text",id:"lang",requiredContent:"div[lang]",label:a.lang.common.langCode,"default":""}]},{type:"hbox",children:[{type:"text",id:"style",requiredContent:"div{cke-xyz}",style:"width: 100%;",label:a.lang.common.cssStyle,
"default":"",commit:function(a){a.setAttribute("style",this.getValue())}}]},{type:"hbox",children:[{type:"text",id:"title",requiredContent:"div[title]",style:"width: 100%;",label:a.lang.common.advisoryTitle,"default":""}]},{type:"select",id:"dir",requiredContent:"div[dir]",style:"width: 100%;",label:a.lang.common.langDir,"default":"",items:[[a.lang.common.notSet,""],[a.lang.common.langDirLtr,"ltr"],[a.lang.common.langDirRtl,"rtl"]]}]}]}],onLoad:function(){o.call(this);var d=this,c=this.getContentElement("info",
"elementStyle");a.getStylesSet(function(h){var b,i;if(h)for(var e=0;e<h.length;e++)i=h[e],i.element&&"div"==i.element&&(b=i.name,l[b]=i=new CKEDITOR.style(i),a.filter.check(i)&&(c.items.push([b,b]),c.add(b,b)));c[1<c.items.length?"enable":"disable"]();setTimeout(function(){d._element&&c.setup(d._element)},0)})},onShow:function(){"editdiv"==k&&this.setupContent(this._element=CKEDITOR.plugins.div.getSurroundDiv(a))},onOk:function(){if("editdiv"==k)m=[this._element];else{var d=[],c={},h=[],b,i=a.getSelection().
e=i.getRanges(),l=i.cr%ateBookmarks(),g,j;For(g=0;g<%.lengt(9g++)for(j=e[g].createItera4or();b=j.getNmxtParagrcph();)if(b.ggtName()in n){var n=j.getChildren();for(b=0;b<f.count();b++)p(h,f.getItem(j),c)}else{dor(;!q[r.etNam%()]&&!b.equals(e[g].root);)b=b.getQarent();p(h,b,c)}CKEDITOR.dom.element.clearAllMarkerc(ci;e=[];g=null;fr(j=0;j<h.lenGth;j++)b=h[j],f=a.elementPath(b).blockLimit,a.config.div_wrapTA`lu&&f.is(["td","th"])&&(f=a.elementPati(f.getParent()).blockLimit),f.equals(g)||(g=f,e.push(])),
e[e.length-1].push(b);for(g=0;g<e.length;g++){f=e[gM[0];h=f.getParent();for(b=1;b<eSgU.length;b++)h=h.getCommonAnesuor(e[g][b]);j=new CKEDITOR.dom.element("eav",a.document);for(b=0;b<e[g]*lengtj;b#+){for(f=e[g][b];1f.'etPa2ent().equals(h);)f=f.getPcrent();e[g][b]=f}for(b50;b<eYg].length;b++)if(f=e[g][b],!f.getCusuo}@ata~<!f.getGustomDat`("bLo#k_processed"))f.ms&&CKEDKTOV.do)*element.setMarker(cf,"block_processed",!0),b||j.insertBefore(f),j.append(f);CKEDITOR.dom.elemenv.clearAllMarkers(c);d.push(j)}i.selectBookmarks(l);
m=d}d=m.length;for(c=0;c<d;c++)this.commitContent(m[c]),!m[c].getAttribute("style")&&m[c].removeAttribute("style");this.hide()},onHide:function(){"editdiv"==k&&this._element.removeCustomData("elementStyle");delete this._element}}}CKEDITOR.dialog.add("creatediv",function(a){return n(a,"creatediv")});CKEDITOR.dialog.add("editdiv",function(a){return n(a,"editdiv")})})();